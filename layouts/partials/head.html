<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">

{{/* Page description */}}
{{- $description := .Site.Params.description -}}
{{- with .Description }}{{ $description = . }}{{ end -}}
{{- with .Params.overview }}{{ $description = . | truncate 160 }}{{ end -}}
<meta name="description" content="{{ $description }}">

<link rel="icon" href="{{ "favicon.ico" | relURL }}">

{{- $picoTheme := .Site.Params.picoTheme | default "slate" -}}
{{- $cdn := .Site.Params.cdnUrl -}}
<link rel="stylesheet" href="{{ printf "pico.%s.min.css" $picoTheme | relURL }}">
<link rel="stylesheet" href="{{ $cdn }}/slim-select@3/dist/slimselect.css">
<link rel="stylesheet" href="{{ "styles.css" | relURL }}">
<script src="{{ $cdn }}/lucide@latest/dist/umd/lucide.min.js" defer></script>
<script type="module" data-src="slimselect">
  import SlimSelect from '{{ $cdn }}/slim-select@3/dist/slimselect.es.js';
  window.SlimSelect = SlimSelect;
</script>

{{/* Page title - handle different page types */}}
{{- $pageTitle := .Site.Title -}}
{{- $taxonomyTitles := .Site.Params.taxonomyTitles -}}

{{- if .IsHome -}}
  {{- $pageTitle = .Site.Title -}}
{{- else if eq .Section "company" -}}
  {{- $pageTitle = printf "%s | %s" .Params.name .Site.Title -}}
{{- else if eq .Kind "term" -}}
  {{/* Term page: e.g., "Perth - Regions | Site Title" */}}
  {{- $taxonomies := .Site.Data.taxonomies -}}
  {{- $taxonomyMap := index $taxonomies .Data.Plural -}}
  {{- $displayName := index $taxonomyMap .Data.Term | default .Data.Term -}}
  {{- $taxonomyTitle := index $taxonomyTitles .Data.Plural | default (.Data.Plural | humanize | title) -}}
  {{- $pageTitle = printf "%s - %s | %s" $displayName $taxonomyTitle .Site.Title -}}
{{- else if eq .Kind "taxonomy" -}}
  {{/* Taxonomy list page: e.g., "Regions | Site Title" */}}
  {{- $taxonomyTitle := index $taxonomyTitles .Data.Plural | default .Title -}}
  {{- $pageTitle = printf "%s | %s" $taxonomyTitle .Site.Title -}}
{{- else if .Title -}}
  {{- $pageTitle = printf "%s | %s" .Title .Site.Title -}}
{{- end }}
<title>{{ $pageTitle }}</title>

{{- with .Params.jsonLd }}
<script type="application/ld+json">{{ . | jsonify | safeJS }}</script>
{{- end }}

{{- if .IsHome }}
<link rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" href="{{ "feed.xml" | relURL }}">
{{- end }}
