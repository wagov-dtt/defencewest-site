[tools]
python = "3.12"
uv = "latest"
node = "22"
pnpm = "latest"
lychee = "latest"

[env]
PYTHONDONTWRITEBYTECODE = "1"

[tasks.setup]
run = ["uv sync", "pnpm install"]

[tasks.dev]
run = "pnpm exec astro dev"

[tasks.build]
run = ["pnpm exec astro build", "mise run linkcheck"]

[tasks.linkcheck]
sources = ["data/**/*.yaml", "src/**/*.astro"]
outputs = [".lycheecache"]
run = "lychee dist/ src/**/*.astro --no-progress --cache --max-cache-age 7d || true"

[tasks.format]
run = "pnpm exec prettier --write 'src/**/*.{astro,ts,js,css}' 'public/**/*.css'"

[tasks.check]
run = "pnpm exec astro check"
